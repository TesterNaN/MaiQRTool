# MaiQRTool - 舞萌/中二 登录二维码获取工具

> 一键自动获取舞萌DX、中二节奏游戏登录二维码的 Windows 工具，支持本地与远程访问。

[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)
![Platform](https://img.shields.io/badge/Platform-Windows-0078d7.svg)
![Python](https://img.shields.io/badge/Python-3.8+-3776ab.svg)

## ✨ 特性

- **全自动获取**：访问网页即可自动完成二维码获取与展示
- **防抖机制**：会话共享机制，避免重复操作
- **远程访问**：支持多种内网穿透方案，手机也能随时获取
- **安全认证**：密码登录+会话管理，使用安全放心

## 📋 系统要求

- **操作系统**：Windows 10 或更高版本
- **必要软件**：
  - Python 3.8+
  - 微信PC版（已登录状态）

## 🚀 快速开始

### 1. 安装依赖
```bash
# 克隆项目后，在项目目录执行：
pip install -r requirements.txt
```

### 2. 准备微信窗口
1. 打开并登录微信PC版
2. 进入 **“舞萌丨中二”** 公众号聊天界面
3. **双击** 公众号窗口，使其变为独立窗口

### 3. 启动服务
```bash
python app.py
```
启动后控制台会显示：
- 登录密码（请保存）
- 本地访问地址：`http://localhost:5000`

### 4. 登录使用
1. 浏览器访问：`http://localhost:5000/login?password=你的密码`
2. 登录成功后，访问 `http://localhost:5000` 即可自动获取并显示二维码

**小屏幕设备说明**：如果你的设备是小屏幕或低版本的安卓设备（如安卓手表、安卓老人机等），可以直接访问 ``http://localhost:5000/img`，该链接会直接返回纯二维码图片。

## 🌐 远程访问方案

### 方案一：SakuraFrp
1.  **注册与准备**：访问官网注册账号，在管理面板复制访问密钥。
2.  **创建隧道**：在管理面板创建 TCP 隧道，本地地址填 `127.0.0.1`，本地端口填 `5000`，选择非内地节点。
3.  **启动隧道**：下载 frpc 客户端，使用密钥登录并启动对应隧道。
4.  **远程访问**：使用隧道列表中显示的连接地址（如 `xxx.natfrp.cloud:端口`）在手机浏览器中访问。

### 方案二：贝锐蒲公英
1.  **安装组网**：在电脑和手机上分别安装蒲公英客户端，使用同一账号登录。
2.  **获取IP**：在手机客户端查看为电脑分配的虚拟IP（通常为 `172.x.x.x`）。
3.  **远程访问**：在手机浏览器访问 `http://虚拟IP:5000`。

### 方案三：Cpolar
1.  **安装创建**：安装 Cpolar 软件，访问 `http://localhost:9200` 进入管理界面，创建一个 HTTP 隧道，本地端口填 `5000`。
2.  **获取地址**：在“在线隧道列表”中复制生成的公网地址。
3.  **远程访问**：在手机浏览器中直接访问该公网地址。

### 方案四：贝锐花生壳
1.  **设置映射**：安装花生壳客户端并登录，点击“添加映射”，应用类型选 `HTTP`，内网主机填电脑的局域网IP，内网端口填 `5000`。
2.  **获取地址**：保存后，系统将分配一个外网访问地址（格式如 `xxx.vicp.net:端口`）。
3.  **远程访问**：在手机浏览器中输入此地址进行访问。

## ⚙️ 配置管理

配置文件位于 `config.json`：

```json
{
  "login_password": "",
  "aes_key": "",
  "aes_iv": "",
  "port": 5000,
  "created_at": 0
}
```

- **修改端口**：编辑 `port` 值后重启程序
- **修改密码**：编辑 `login_password` 值后重启程序
- **重置配置**：删除 `config.json` 后重启程序

## ❓ 常见问题

### 程序提示“未找到舞萌窗口”
请确认“舞萌丨中二”公众号的聊天界面存在且已通过双击变为独立窗口。

### 二维码获取失败或页面空白
1.  刷新页面重试
2.  检查电脑网络连接
3.  确认微信处于已登录在线状态

### 远程无法连接
1.  确认本程序正在电脑上运行
2.  检查所使用的穿透工具客户端是否正常运行
3.  核对手机浏览器中输入的访问地址和端口号是否正确

## 📄 许可证

本项目基于 [GPL-3.0](LICENSE) 许可证开源。
